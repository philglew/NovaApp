{"ast":null,"code":"/*! @azure/msal-common v14.16.0 2024-11-05 */\n'use strict';\n\n/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\n/**\r\n * Wraps a function with a performance measurement.\r\n * Usage: invoke(functionToCall, performanceClient, \"EventName\", \"correlationId\")(...argsToPassToFunction)\r\n * @param callback\r\n * @param eventName\r\n * @param logger\r\n * @param telemetryClient\r\n * @param correlationId\r\n * @returns\r\n * @internal\r\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst invoke = (callback, eventName, logger, telemetryClient, correlationId) => {\n  return function () {\n    logger.trace(\"Executing function \".concat(eventName));\n    const inProgressEvent = telemetryClient === null || telemetryClient === void 0 ? void 0 : telemetryClient.startMeasurement(eventName, correlationId);\n    if (correlationId) {\n      // Track number of times this API is called in a single request\n      const eventCount = eventName + \"CallCount\";\n      telemetryClient === null || telemetryClient === void 0 || telemetryClient.incrementFields({\n        [eventCount]: 1\n      }, correlationId);\n    }\n    try {\n      const result = callback(...arguments);\n      inProgressEvent === null || inProgressEvent === void 0 || inProgressEvent.end({\n        success: true\n      });\n      logger.trace(\"Returning result from \".concat(eventName));\n      return result;\n    } catch (e) {\n      logger.trace(\"Error occurred in \".concat(eventName));\n      try {\n        logger.trace(JSON.stringify(e));\n      } catch (e) {\n        logger.trace(\"Unable to print error message.\");\n      }\n      inProgressEvent === null || inProgressEvent === void 0 || inProgressEvent.end({\n        success: false\n      }, e);\n      throw e;\n    }\n  };\n};\n/**\r\n * Wraps an async function with a performance measurement.\r\n * Usage: invokeAsync(functionToCall, performanceClient, \"EventName\", \"correlationId\")(...argsToPassToFunction)\r\n * @param callback\r\n * @param eventName\r\n * @param logger\r\n * @param telemetryClient\r\n * @param correlationId\r\n * @returns\r\n * @internal\r\n *\r\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst invokeAsync = (callback, eventName, logger, telemetryClient, correlationId) => {\n  return function () {\n    logger.trace(\"Executing function \".concat(eventName));\n    const inProgressEvent = telemetryClient === null || telemetryClient === void 0 ? void 0 : telemetryClient.startMeasurement(eventName, correlationId);\n    if (correlationId) {\n      // Track number of times this API is called in a single request\n      const eventCount = eventName + \"CallCount\";\n      telemetryClient === null || telemetryClient === void 0 || telemetryClient.incrementFields({\n        [eventCount]: 1\n      }, correlationId);\n    }\n    telemetryClient === null || telemetryClient === void 0 || telemetryClient.setPreQueueTime(eventName, correlationId);\n    return callback(...arguments).then(response => {\n      logger.trace(\"Returning result from \".concat(eventName));\n      inProgressEvent === null || inProgressEvent === void 0 || inProgressEvent.end({\n        success: true\n      });\n      return response;\n    }).catch(e => {\n      logger.trace(\"Error occurred in \".concat(eventName));\n      try {\n        logger.trace(JSON.stringify(e));\n      } catch (e) {\n        logger.trace(\"Unable to print error message.\");\n      }\n      inProgressEvent === null || inProgressEvent === void 0 || inProgressEvent.end({\n        success: false\n      }, e);\n      throw e;\n    });\n  };\n};\nexport { invoke, invokeAsync };","map":{"version":3,"names":["invoke","callback","eventName","logger","telemetryClient","correlationId","trace","concat","inProgressEvent","startMeasurement","eventCount","incrementFields","result","arguments","end","success","e","JSON","stringify","invokeAsync","setPreQueueTime","then","response","catch"],"sources":["C:\\temp\\NovaApp\\src\\nova.web\\node_modules\\@azure\\msal-common\\src\\utils\\FunctionWrappers.ts"],"sourcesContent":["/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport { Logger } from \"../logger/Logger.js\";\nimport { IPerformanceClient } from \"../telemetry/performance/IPerformanceClient.js\";\n\n/**\n * Wraps a function with a performance measurement.\n * Usage: invoke(functionToCall, performanceClient, \"EventName\", \"correlationId\")(...argsToPassToFunction)\n * @param callback\n * @param eventName\n * @param logger\n * @param telemetryClient\n * @param correlationId\n * @returns\n * @internal\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const invoke = <T extends Array<any>, U>(\n    callback: (...args: T) => U,\n    eventName: string,\n    logger: Logger,\n    telemetryClient?: IPerformanceClient,\n    correlationId?: string\n) => {\n    return (...args: T): U => {\n        logger.trace(`Executing function ${eventName}`);\n        const inProgressEvent = telemetryClient?.startMeasurement(\n            eventName,\n            correlationId\n        );\n        if (correlationId) {\n            // Track number of times this API is called in a single request\n            const eventCount = eventName + \"CallCount\";\n            telemetryClient?.incrementFields(\n                { [eventCount]: 1 },\n                correlationId\n            );\n        }\n        try {\n            const result = callback(...args);\n            inProgressEvent?.end({\n                success: true,\n            });\n            logger.trace(`Returning result from ${eventName}`);\n            return result;\n        } catch (e) {\n            logger.trace(`Error occurred in ${eventName}`);\n            try {\n                logger.trace(JSON.stringify(e));\n            } catch (e) {\n                logger.trace(\"Unable to print error message.\");\n            }\n            inProgressEvent?.end(\n                {\n                    success: false,\n                },\n                e\n            );\n            throw e;\n        }\n    };\n};\n\n/**\n * Wraps an async function with a performance measurement.\n * Usage: invokeAsync(functionToCall, performanceClient, \"EventName\", \"correlationId\")(...argsToPassToFunction)\n * @param callback\n * @param eventName\n * @param logger\n * @param telemetryClient\n * @param correlationId\n * @returns\n * @internal\n *\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const invokeAsync = <T extends Array<any>, U>(\n    callback: (...args: T) => Promise<U>,\n    eventName: string,\n    logger: Logger,\n    telemetryClient?: IPerformanceClient,\n    correlationId?: string\n) => {\n    return (...args: T): Promise<U> => {\n        logger.trace(`Executing function ${eventName}`);\n        const inProgressEvent = telemetryClient?.startMeasurement(\n            eventName,\n            correlationId\n        );\n        if (correlationId) {\n            // Track number of times this API is called in a single request\n            const eventCount = eventName + \"CallCount\";\n            telemetryClient?.incrementFields(\n                { [eventCount]: 1 },\n                correlationId\n            );\n        }\n        telemetryClient?.setPreQueueTime(eventName, correlationId);\n        return callback(...args)\n            .then((response) => {\n                logger.trace(`Returning result from ${eventName}`);\n                inProgressEvent?.end({\n                    success: true,\n                });\n                return response;\n            })\n            .catch((e) => {\n                logger.trace(`Error occurred in ${eventName}`);\n                try {\n                    logger.trace(JSON.stringify(e));\n                } catch (e) {\n                    logger.trace(\"Unable to print error message.\");\n                }\n                inProgressEvent?.end(\n                    {\n                        success: false,\n                    },\n                    e\n                );\n                throw e;\n            });\n    };\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}