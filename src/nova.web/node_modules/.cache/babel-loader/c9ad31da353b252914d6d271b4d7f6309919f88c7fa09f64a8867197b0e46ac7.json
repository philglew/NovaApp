{"ast":null,"code":"/*! @azure/msal-browser v3.28.0 2024-12-12 */\n'use strict';\n\nimport _objectSpread from \"C:/temp/NovaApp/src/nova.web/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { PerformanceEvents, invokeAsync, AuthenticationScheme, createClientConfigurationError, ClientConfigurationErrorCodes, StringUtils } from '@azure/msal-common/browser';\nimport { hashString } from '../crypto/BrowserCrypto.mjs';\n\n/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\n/**\r\n * Initializer function for all request APIs\r\n * @param request\r\n */\nasync function initializeBaseRequest(request, config, performanceClient, logger) {\n  performanceClient.addQueueMeasurement(PerformanceEvents.InitializeBaseRequest, request.correlationId);\n  const authority = request.authority || config.auth.authority;\n  const scopes = [...(request && request.scopes || [])];\n  const validatedRequest = _objectSpread(_objectSpread({}, request), {}, {\n    correlationId: request.correlationId,\n    authority,\n    scopes\n  });\n  // Set authenticationScheme to BEARER if not explicitly set in the request\n  if (!validatedRequest.authenticationScheme) {\n    validatedRequest.authenticationScheme = AuthenticationScheme.BEARER;\n    logger.verbose('Authentication Scheme wasn\\'t explicitly set in request, defaulting to \"Bearer\" request');\n  } else {\n    if (validatedRequest.authenticationScheme === AuthenticationScheme.SSH) {\n      if (!request.sshJwk) {\n        throw createClientConfigurationError(ClientConfigurationErrorCodes.missingSshJwk);\n      }\n      if (!request.sshKid) {\n        throw createClientConfigurationError(ClientConfigurationErrorCodes.missingSshKid);\n      }\n    }\n    logger.verbose(\"Authentication Scheme set to \\\"\".concat(validatedRequest.authenticationScheme, \"\\\" as configured in Auth request\"));\n  }\n  // Set requested claims hash if claims-based caching is enabled and claims were requested\n  if (config.cache.claimsBasedCachingEnabled && request.claims &&\n  // Checks for empty stringified object \"{}\" which doesn't qualify as requested claims\n  !StringUtils.isEmptyObj(request.claims)) {\n    validatedRequest.requestedClaimsHash = await hashString(request.claims);\n  }\n  return validatedRequest;\n}\nasync function initializeSilentRequest(request, account, config, performanceClient, logger) {\n  performanceClient.addQueueMeasurement(PerformanceEvents.InitializeSilentRequest, request.correlationId);\n  const baseRequest = await invokeAsync(initializeBaseRequest, PerformanceEvents.InitializeBaseRequest, logger, performanceClient, request.correlationId)(request, config, performanceClient, logger);\n  return _objectSpread(_objectSpread(_objectSpread({}, request), baseRequest), {}, {\n    account: account,\n    forceRefresh: request.forceRefresh || false\n  });\n}\nexport { initializeBaseRequest, initializeSilentRequest };","map":{"version":3,"names":["initializeBaseRequest","request","config","performanceClient","logger","addQueueMeasurement","PerformanceEvents","InitializeBaseRequest","correlationId","authority","auth","scopes","validatedRequest","_objectSpread","authenticationScheme","AuthenticationScheme","BEARER","verbose","SSH","sshJwk","createClientConfigurationError","ClientConfigurationErrorCodes","missingSshJwk","sshKid","missingSshKid","concat","cache","claimsBasedCachingEnabled","claims","StringUtils","isEmptyObj","requestedClaimsHash","hashString","initializeSilentRequest","account","InitializeSilentRequest","baseRequest","invokeAsync","forceRefresh"],"sources":["C:\\temp\\NovaApp\\src\\nova.web\\node_modules\\@azure\\msal-browser\\src\\request\\RequestHelpers.ts"],"sourcesContent":["/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport {\n    AccountInfo,\n    AuthenticationScheme,\n    BaseAuthRequest,\n    ClientConfigurationErrorCodes,\n    CommonSilentFlowRequest,\n    IPerformanceClient,\n    Logger,\n    PerformanceEvents,\n    StringUtils,\n    createClientConfigurationError,\n    invokeAsync,\n} from \"@azure/msal-common/browser\";\nimport { BrowserConfiguration } from \"../config/Configuration.js\";\nimport { SilentRequest } from \"./SilentRequest.js\";\nimport { hashString } from \"../crypto/BrowserCrypto.js\";\n\n/**\n * Initializer function for all request APIs\n * @param request\n */\nexport async function initializeBaseRequest(\n    request: Partial<BaseAuthRequest> & { correlationId: string },\n    config: BrowserConfiguration,\n    performanceClient: IPerformanceClient,\n    logger: Logger\n): Promise<BaseAuthRequest> {\n    performanceClient.addQueueMeasurement(\n        PerformanceEvents.InitializeBaseRequest,\n        request.correlationId\n    );\n    const authority = request.authority || config.auth.authority;\n\n    const scopes = [...((request && request.scopes) || [])];\n\n    const validatedRequest: BaseAuthRequest = {\n        ...request,\n        correlationId: request.correlationId,\n        authority,\n        scopes,\n    };\n\n    // Set authenticationScheme to BEARER if not explicitly set in the request\n    if (!validatedRequest.authenticationScheme) {\n        validatedRequest.authenticationScheme = AuthenticationScheme.BEARER;\n        logger.verbose(\n            'Authentication Scheme wasn\\'t explicitly set in request, defaulting to \"Bearer\" request'\n        );\n    } else {\n        if (\n            validatedRequest.authenticationScheme === AuthenticationScheme.SSH\n        ) {\n            if (!request.sshJwk) {\n                throw createClientConfigurationError(\n                    ClientConfigurationErrorCodes.missingSshJwk\n                );\n            }\n            if (!request.sshKid) {\n                throw createClientConfigurationError(\n                    ClientConfigurationErrorCodes.missingSshKid\n                );\n            }\n        }\n        logger.verbose(\n            `Authentication Scheme set to \"${validatedRequest.authenticationScheme}\" as configured in Auth request`\n        );\n    }\n\n    // Set requested claims hash if claims-based caching is enabled and claims were requested\n    if (\n        config.cache.claimsBasedCachingEnabled &&\n        request.claims &&\n        // Checks for empty stringified object \"{}\" which doesn't qualify as requested claims\n        !StringUtils.isEmptyObj(request.claims)\n    ) {\n        validatedRequest.requestedClaimsHash = await hashString(request.claims);\n    }\n\n    return validatedRequest;\n}\n\nexport async function initializeSilentRequest(\n    request: SilentRequest & { correlationId: string },\n    account: AccountInfo,\n    config: BrowserConfiguration,\n    performanceClient: IPerformanceClient,\n    logger: Logger\n): Promise<CommonSilentFlowRequest> {\n    performanceClient.addQueueMeasurement(\n        PerformanceEvents.InitializeSilentRequest,\n        request.correlationId\n    );\n\n    const baseRequest = await invokeAsync(\n        initializeBaseRequest,\n        PerformanceEvents.InitializeBaseRequest,\n        logger,\n        performanceClient,\n        request.correlationId\n    )(request, config, performanceClient, logger);\n    return {\n        ...request,\n        ...baseRequest,\n        account: account,\n        forceRefresh: request.forceRefresh || false,\n    };\n}\n"],"mappings":";;;;;;;AAAA;;;AAGG;AAmBH;;;AAGG;AACI,eAAeA,qBAAqBA,CACvCC,OAA6D,EAC7DC,MAA4B,EAC5BC,iBAAqC,EACrCC,MAAc;EAEdD,iBAAiB,CAACE,mBAAmB,CACjCC,iBAAiB,CAACC,qBAAqB,EACvCN,OAAO,CAACO,aAAa,CACxB;EACD,MAAMC,SAAS,GAAGR,OAAO,CAACQ,SAAS,IAAIP,MAAM,CAACQ,IAAI,CAACD,SAAS;EAE5D,MAAME,MAAM,GAAG,CAAC,IAAKV,OAAO,IAAIA,OAAO,CAACU,MAAM,IAAK,EAAE,CAAC,CAAC;EAEvD,MAAMC,gBAAgB,GAAAC,aAAA,CAAAA,aAAA,KACfZ,OAAO;IACVO,aAAa,EAAEP,OAAO,CAACO,aAAa;IACpCC,SAAS;IACTE;EAAM,EACT;;EAGD,IAAI,CAACC,gBAAgB,CAACE,oBAAoB,EAAE;IACxCF,gBAAgB,CAACE,oBAAoB,GAAGC,oBAAoB,CAACC,MAAM;IACnEZ,MAAM,CAACa,OAAO,CACV,yFAAyF,CAC5F;EACJ,OAAM;IACH,IACIL,gBAAgB,CAACE,oBAAoB,KAAKC,oBAAoB,CAACG,GAAG,EACpE;MACE,IAAI,CAACjB,OAAO,CAACkB,MAAM,EAAE;QACjB,MAAMC,8BAA8B,CAChCC,6BAA6B,CAACC,aAAa,CAC9C;MACJ;MACD,IAAI,CAACrB,OAAO,CAACsB,MAAM,EAAE;QACjB,MAAMH,8BAA8B,CAChCC,6BAA6B,CAACG,aAAa,CAC9C;MACJ;IACJ;IACDpB,MAAM,CAACa,OAAO,mCAAAQ,MAAA,CACuBb,gBAAgB,CAACE,oBAAoB,qCAAiC,CAC1G;EACJ;;EAGD,IACIZ,MAAM,CAACwB,KAAK,CAACC,yBAAyB,IACtC1B,OAAO,CAAC2B,MAAM;;EAEd,CAACC,WAAW,CAACC,UAAU,CAAC7B,OAAO,CAAC2B,MAAM,CAAC,EACzC;IACEhB,gBAAgB,CAACmB,mBAAmB,GAAG,MAAMC,UAAU,CAAC/B,OAAO,CAAC2B,MAAM,CAAC;EAC1E;EAED,OAAOhB,gBAAgB;AAC3B;AAEO,eAAeqB,uBAAuBA,CACzChC,OAAkD,EAClDiC,OAAoB,EACpBhC,MAA4B,EAC5BC,iBAAqC,EACrCC,MAAc;EAEdD,iBAAiB,CAACE,mBAAmB,CACjCC,iBAAiB,CAAC6B,uBAAuB,EACzClC,OAAO,CAACO,aAAa,CACxB;EAED,MAAM4B,WAAW,GAAG,MAAMC,WAAW,CACjCrC,qBAAqB,EACrBM,iBAAiB,CAACC,qBAAqB,EACvCH,MAAM,EACND,iBAAiB,EACjBF,OAAO,CAACO,aAAa,CACxB,CAACP,OAAO,EAAEC,MAAM,EAAEC,iBAAiB,EAAEC,MAAM,CAAC;EAC7C,OAAAS,aAAA,CAAAA,aAAA,CAAAA,aAAA,KACOZ,OAAO,GACPmC,WAAW;IACdF,OAAO,EAAEA,OAAO;IAChBI,YAAY,EAAErC,OAAO,CAACqC,YAAY,IAAI;EAAK;AAEnD","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}